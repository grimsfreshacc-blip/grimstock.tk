<!DOCTYPE html>
<html>
<head><title>Admin</title><link rel="stylesheet" href="style.css"><script src="js/auth.js"></script><script src="js/roles.js"></script></head>
<body>
<h2>Admin Panel</h2>
<button onclick="logout()">Logout</button>

<h3>Orders</h3>
<div id="orders"></div>

<script>
requireAdmin();

function loadOrders(){
  const el=document.getElementById("orders");
  const orders=JSON.parse(localStorage.getItem("orders")||"[]");
  el.innerHTML="";
  orders.forEach((o,i)=>{
    el.innerHTML+=`<div>${o.id} - ${o.status} <button onclick="deliver(${i})">Mark Delivered</button></div>`;
  });
}

function deliver(i){
  let orders=JSON.parse(localStorage.getItem("orders")||"[]");
  orders[i].status="Delivered";
  localStorage.setItem("orders",JSON.stringify(orders));
  loadOrders();
}

loadOrders();
</script>
</body>
</html>
