<!DOCTYPE html>
<html>
<head>
  <title>Sign Up</title>
  <link rel="stylesheet" href="style.css">
  <script src="js/auth.js"></script>
</head>
<body>
<h2>Sign Up</h2>
<input id="user" placeholder="Username">
<input id="pass" placeholder="Password" type="password">
<select id="role">
  <option value="buyer">Buyer</option>
  <option value="seller">Seller</option>
</select>
<button onclick="signup()">Sign Up</button>
<p>Already have an account? <a href="buyer-login.html">Login</a></p>

<script>
function signup() {
  const u=user.value.trim();
  const p=pass.value.trim();
  const r=role.value;
  if(!u||!p){ alert("Fill all fields"); return; }

  let buyers = JSON.parse(localStorage.getItem("buyers")||"[]");
  let sellers = JSON.parse(localStorage.getItem("sellers")||"[]");
  if(buyers.find(b=>b.user===u)||sellers.find(s=>s.user===u)||OWNERS.includes(u)){ alert("Username exists"); return; }

  if(r==="buyer"){ buyers.push({user:u,pass:p}); localStorage.setItem("buyers",JSON.stringify(buyers)); }
  else if(r==="seller"){ sellers.push({user:u,pass:p}); localStorage.setItem("sellers",JSON.stringify(sellers)); }

  alert("Account created! Login now."); location.href="buyer-login.html";
}
</script>
</body>
</html>
