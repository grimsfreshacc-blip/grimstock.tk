<!DOCTYPE html>
<html>
<head>
  <title>Seller Dashboard - GrimStock</title>
  <link rel="stylesheet" href="style.css">
  <script src="js/auth.js"></script>
  <script src="js/roles.js"></script>
</head>
<body>

<header>
  <div class="logo">GrimStock - Seller</div>
  <button onclick="logout()">Logout</button>
</header>

<h2>Seller Dashboard</h2>
<h3>Your Products</h3>
<div id="myProducts"></div>

<script>
if(getRole()!=="seller"){ alert("Access denied"); window.location.href="index.html"; }

let products = JSON.parse(localStorage.getItem("products")||"[]");

function renderProducts(){
  const el = document.getElementById("myProducts");
  el.innerHTML='';
  products.filter(p=>p.seller===getLoggedUser()).forEach(p=>{
    el.innerHTML+=`<div>${p.title} <button onclick="removeProduct('${p.id}')">Remove</button></div>`;
  });
}

function removeProduct(id){
  products = products.filter(p=>p.id!==id);
  localStorage.setItem("products", JSON.stringify(products));
  renderProducts();
}

renderProducts();
</script>

</body>
</html>
